

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Specifications, Requirements, and Setup &mdash; Home 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/tt_theme.css?v=a41de66c" />
      <link rel="stylesheet" type="text/css" href="../../_static/home.css?v=c560917e" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=fd3dd8dd"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../_static/custom.js?v=0ccd5bc4"></script>
      <script src="../../_static/posthog.js?v=a97abc7e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Support" href="support.html" />
    <link rel="prev" title="TT-LoudBox Desktop Workstation" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



<a href="https://tenstorrent.github.io/">
    <img src="../../_static/tt_logo.svg" class="logo" alt="Logo"/>
</a>

<a href="../../index.html">
    Home
</a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/README.html">Installing the Tenstorrent Software Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/model-demos.html">Running Model Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/vLLM-servers.html">Deploying LLMs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/tt-software-stack.html">Understanding the Tenstorrent Software Stack</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../aibs/index.html">Add-In Boards / Cards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Systems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quietbox/quietbox-bh/index.html">TT-QuietBox (Blackhole)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quietbox/quietbox-wh/index.html">TT-QuietBox (Wormhole)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">TT-LoudBox</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="README.html">TT-LoudBox Desktop Workstation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Specifications, Requirements, and Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#package-contents">Package Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-specifications">System Specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operating-system-requirements">Operating System Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#u-rack-mounting-instructions">4U Rack-Mounting Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qsfp-dd-connections-and-system-topology-tw-02002">QSFP-DD Connections and System Topology (TW-02002)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-specifications">Environment Specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#software-setup">Software Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="support.html">Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../t1000/index.html">T1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../t7000/index.html">T7000</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../forge/index.html">TT-Forge</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.tenstorrent.com/tt-metal/latest/tt-metalium/index.html">TT-Metalium</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.tenstorrent.com/tt-metal/latest/ttnn/index.html">TT-NN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/manual-software-install.html">Manual Software Installation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.tenstorrent.com/pybuda/latest/index.html">TT-Buda (Deprecated)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support/README.html">Support &amp; FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Legal</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://docs.tenstorrent.com/bounty_terms.html">Bounty Program Terms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Home</a>
      </nav>

      <div class="wy-nav-content">
  
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Systems</a></li>
          <li class="breadcrumb-item"><a href="index.html">TT-LoudBox</a></li>
      <li class="breadcrumb-item active">Specifications, Requirements, and Setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/systems/t3000/specifications.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="specifications-requirements-and-setup">
<h1>Specifications, Requirements, and Setup<a class="headerlink" href="#specifications-requirements-and-setup" title="Link to this heading"></a></h1>
<section id="package-contents">
<h2>Package Contents<a class="headerlink" href="#package-contents" title="Link to this heading"></a></h2>
<p>The Tenstorrent TT-LoudBox (T3000) 4U/Desktop Workstation system package includes:</p>
<ul class="simple">
<li><p>Tenstorrent TT-LoudBox (T3000) 4U/Desktop Workstation system</p></li>
<li><p>C13 Power Cable, 1.8m/6ft.</p></li>
<li><p>4U Rack-Mounting Kit</p></li>
<li><p>2x QSFP-DD 400GbE Cable, 0.6m/2ft. (TW-02002 only)</p></li>
</ul>
</section>
<section id="system-specifications">
<h2>System Specifications<a class="headerlink" href="#system-specifications" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Specification</p></th>
<th class="head"><p>TT-LoudBox (TW-02001)</p></th>
<th class="head"><p>TT-LoudBox (TW-02002)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>CPU</strong></p></td>
<td><p>2x Intel® Xeon® Silver 4309Y<br />(8C/16T ea., up to 2.8 GHz, 105W, <a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/215275/intel-xeon-silver-4309y-processor-12m-cache-2-80-ghz.html">Ark</a>)</p></td>
<td><p>2x Intel® Xeon® Silver 4309Y<br />(8C/16T ea., up to 2.8 GHz, 105W, <a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/215275/intel-xeon-silver-4309y-processor-12m-cache-2-80-ghz.html">Ark</a>)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Memory</strong></p></td>
<td><p>256GB (8x32 GB)<br />DDR4-3200 ECC RDIMM<br />(12 Slots Free)</p></td>
<td><p>512GB (16x32 GB)<br />DDR4-3200 ECC RDIMM<br />(12 Slots Free)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Storage</strong></p></td>
<td><p>3.8 TB U.2 NVMe PCIe 4.0 x4</p></td>
<td><p>3.8 TB U.2 NVMe PCIe 4.0 x4</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Tensix Processors</strong></p></td>
<td><p>4x Tenstorrent Wormhole™ n150s Tensix Processor</p></td>
<td><p>4x Tenstorrent Wormhole™ n300s Tensix Processor*<br />4x Warp 100 Interconnects</p></td>
</tr>
<tr class="row-even"><td><p><strong>Cables</strong></p></td>
<td><p>-</p></td>
<td><p>2x QSFP-DD 400GbE Cable, 0.6m/2ft.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Host System Connectivity</strong></p></td>
<td><p>2x RJ45 10GBase-T via Intel® X550-AT<br />5x USB 3.1 Gen 1 (5 Gbps) Type-A (2x Front, 3x Rear)<br />1x USB 3.1 Gen 1 (5Gbps) Type-C<br />1x COM<br />1x VGA<br />1x IPMI</p></td>
<td><p>2x RJ45 10GBase-T via Intel® X550-AT<br />5x USB 3.1 Gen 1 (5 Gbps) Type-A (2x Front, 3x Rear)<br />1x USB 3.1 Gen 1 (5 Gbps) Type-C<br />1x COM<br />1x VGA<br />1x IPMI</p></td>
</tr>
<tr class="row-even"><td><p><strong>Tensix Processor Connectivity</strong></p></td>
<td><p>8x QSFP-DD Active 200G (2 per card)<br /><em>Connects to other Wormhole Tensix Processors only.</em></p></td>
<td><p>8x QSFP-DD Active 200G (2 per card)<br /><em>Connects to other Wormhole Tensix Processors only.</em></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Power Supply</strong></p></td>
<td><p>1+1 Titanium Level PSUs<br />1200W: 100-127Vac<br />1800W-2090W: 200-240Vac<br />2200W: 220-240Vac</p></td>
<td><p>1+1 Titanium Level PSUs<br />1200W: 100-127Vac<br />1800W-2090W: 200-240Vac<br />2200W: 220-240Vac*</p></td>
</tr>
<tr class="row-even"><td><p><strong>Base System</strong></p></td>
<td><p><a class="reference external" href="https://www.supermicro.com/en/products/system/gpu/4u/sys-740gp-tnrt">SuperMicro SuperServer SYS-740GP-TNRT</a></p></td>
<td><p><a class="reference external" href="https://www.supermicro.com/en/products/system/gpu/4u/sys-740gp-tnrt">SuperMicro SuperServer SYS-740GP-TNRT</a></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Operating System</strong></p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
<p>*<em>200V input or higher input voltage required for TW-02002.</em></p>
<p><strong>NOTE:</strong> The MAC address and password for the BMC (baseboard management controller) can be found on labels on both the system chassis and the motherboard. A small slide-out tray with the label is hidden behind the front cover, at the bottom of the system. The label will look like this:</p>
<p><img alt="" src="../../_images/bmclabel.png" /></p>
</section>
<section id="operating-system-requirements">
<h2>Operating System Requirements<a class="headerlink" href="#operating-system-requirements" title="Link to this heading"></a></h2>
<p>The Tenstorrent TT-LoudBox system ships without an operating system installed. We recommend installing Ubuntu 22.04 (Jammy Jellyfish) to properly use the Tenstorrent Tensix Processors.</p>
</section>
<section id="u-rack-mounting-instructions">
<h2>4U Rack-Mounting Instructions<a class="headerlink" href="#u-rack-mounting-instructions" title="Link to this heading"></a></h2>
<p>The Tenstorrent TT-LoudBox ships assembled for desktop use. Instructions to rack-mount the system using the included 4U rack-mounting kit are available in Chapter 2 of the Manual for the <a class="reference external" href="https://www.supermicro.com/en/products/system/gpu/4u/sys-740gp-tnrt">SuperMicro SuperServer SYS-740GP-TNRT</a>.</p>
</section>
<section id="qsfp-dd-connections-and-system-topology-tw-02002">
<h2>QSFP-DD Connections and System Topology (TW-02002)<a class="headerlink" href="#qsfp-dd-connections-and-system-topology-tw-02002" title="Link to this heading"></a></h2>
<p>The Tenstorrent TT-LoudBox configuration in TW-02002 includes four Wormhole™ n300s Tensix Processors and internal Warp 100 bridges and external QSFP-DD cables that enable the Tensix Processor mesh.</p>
<p><img alt="" src="../../_images/wh_portspec.png" /></p>
<p>The TT-LoudBox ships with the Warp 100 bridges connected, but the two QSFP-DD cables will need to be connected by the customer. This diagram displays the system topology and how the cards are enumerated, along with where the Warp 100 bridges are connected and where the included QSFP-DD cables need to be connected.</p>
<p><img alt="" src="../../_images/loudbox_topology.png" /></p>
<p>One QSFP-DD cable will need to be connected to <strong>Port 1</strong> on the cards in <strong>Slots 1 and 4</strong>.</p>
<p>One QSFP-DD cable will need to be connected to <strong>Port 2</strong> on the cards in <strong>Slots 3 and 2</strong>.</p>
</section>
<section id="environment-specifications">
<h2>Environment Specifications<a class="headerlink" href="#environment-specifications" title="Link to this heading"></a></h2>
<p>Please visit the Tenstorrent Wormhole n150s and n300s <a class="reference internal" href="../../aibs/wormhole/specifications.html"><span class="std std-doc">specification page</span></a> for environment specifications for those cards.</p>
<p>Please visit the <a class="reference external" href="https://www.supermicro.com/en/products/system/gpu/4u/sys-740gp-tnrt">SuperMicro SuperServer SYS-740GP-TNRT</a> page for environment specifications for this system.</p>
</section>
<section id="software-setup">
<h2>Software Setup<a class="headerlink" href="#software-setup" title="Link to this heading"></a></h2>
<p>Instructions on how to set up software on TT-LoudBox are available <a class="reference external" href="https://docs.tenstorrent.com/getting-started/README.html">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README.html" class="btn btn-neutral float-left" title="TT-LoudBox Desktop Workstation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="support.html" class="btn btn-neutral float-right" title="Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Tenstorrent.
      <span class="lastupdated">Last updated on Oct 31, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
  <div class="feedback-widget" id="tt-feedback">
  <div class="ttfb-card">
    <div id="ttfb-initial" class="ttfb-initial">
      <p class="ttfb-question">Was this article helpful?</p>
      <div class="ttfb-actions">
        <button id="ttfb-up" class="ttfb-icon-btn" aria-label="Yes" title="Yes">
          <span>👍</span>
        </button>
        <button id="ttfb-down" class="ttfb-icon-btn" aria-label="No" title="No">
          <span>👎</span>
        </button>
      </div>
    </div>

    <form id="ttfb-form" class="ttfb-hidden" novalidate>
      <p id="ttfb-prompt" class="ttfb-prompt"></p>

      <div id="ttfb-reasons" class="ttfb-hidden">
        <p class="ttfb-reasons-title">How would you describe this article?</p>
        <div class="ttfb-reasons-grid">
          <label class="ttfb-radio"><input type="radio" name="down_reason" value="inaccurate"> <b>Inaccurate:</b> it doesn’t reflect what I see in the product</label>
          <label class="ttfb-radio"><input type="radio" name="down_reason" value="unclear"> <b>Unclear:</b> it’s difficult to understand</label>
          <label class="ttfb-radio"><input type="radio" name="down_reason" value="missing"> <b>Missing information:</b> it’s not comprehensive enough</label>
          <label class="ttfb-radio"><input type="radio" name="down_reason" value="irrelevant"> <b>Irrelevant:</b> it doesn’t match what I searched for</label>
        </div>
      </div>

      <textarea id="ttfb-text" rows="3" class="ttfb-text" placeholder="Please let us know what was or wasn't helpful about this page."></textarea>

      <div class="ttfb-contact">
        <input id="ttfb-can-contact" type="checkbox"> <label for="ttfb-can-contact">Allow Tenstorrent to contact me about my documentation feedback.</label>
      </div>
      <div id="ttfb-email-wrap" class="ttfb-hidden">
        <input id="ttfb-email" type="email" class="ttfb-email" placeholder="Enter your email address">
      </div>

      <button id="ttfb-submit" type="submit" class="ttfb-submit">Submit</button>
    </form>

    <div id="ttfb-thanks" class="ttfb-hidden ttfb-center"><p class="ttfb-thanks-text">Thank you for your feedback!</p></div>
    <div id="ttfb-error" class="ttfb-hidden ttfb-center"><p class="ttfb-error-text">Sorry, something went wrong. Please try again later.</p></div>
  </div>
</div>

<style>
.feedback-widget { margin: 2rem 0; }
.ttfb-card {
  background: #fff;
  border: 1px solid var(--color-background-40, #d7dbeb66);
  border-radius: 8px;
  padding: 1rem;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.ttfb-initial { display: flex; flex-direction: row; gap: .75rem; align-items: center; flex-wrap: wrap; justify-content: flex-start; }
.ttfb-question { margin: 0; font-weight: 600; color: var(--color-foreground, #202020); }
.ttfb-actions { display: flex; gap: .5rem; }
.ttfb-icon-btn {
  padding: .5rem; border: 1px solid #d0d7de; border-radius: 6px; background: #fff; cursor: pointer;
  transition: background var(--transition-duration, 150ms) var(--transition-timing, ease), border-color var(--transition-duration, 150ms) var(--transition-timing, ease);
}
.ttfb-icon-btn:hover { background: #f3f4f6; }

.ttfb-hidden { display: none; }
.ttfb-prompt { margin: .5rem 0 1rem 0; color: var(--color-foreground, #202020); font-weight: 600; }
.ttfb-reasons-title { margin: 0 0 .5rem 0; color: var(--color-foreground, #202020); font-weight: 500; }
.ttfb-reasons-grid { display: grid; grid-template-columns: 1fr; gap: .25rem; }
@media (min-width: 768px) { .ttfb-reasons-grid { grid-template-columns: 1fr 1fr; } }
.ttfb-radio { display: flex; align-items: flex-start; gap: .5rem; }
.ttfb-radio input { margin-top: .2rem; }

.ttfb-text {
  width: 100%; padding: .5rem; border: 1px solid #d0d7de; border-radius: 6px; font-family: inherit; resize: vertical;
}
.ttfb-contact { display: flex; align-items: center; gap: .5rem; margin-top: .5rem; }
.ttfb-email { width: 100%; padding: .5rem; border: 1px solid #d0d7de; border-radius: 6px; margin-top: .5rem; }
.ttfb-submit { margin-top: .75rem; padding: .5rem 1rem; background: var(--color-purple, #5164e0); color: #fff; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; }
.ttfb-submit:hover { background: var(--color-dark-purple, #7584e6); }
.ttfb-center { text-align: center; padding: 1rem; }
.ttfb-thanks-text { color: var(--color-purple, #5164e0); font-weight: 600; }
.ttfb-error-text { color: #dc2626; font-weight: 600; }

/* Hide widget when page sets meta hide_feedback=true */
html:has(meta[name="hide_feedback"][content="true"]) .feedback-widget { display: none !important; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const root = document.getElementById('tt-feedback');
  if (!root) return;

  // Reposition widget: place it just above the Previous/Next buttons
  try {
    const footerButtons = document.querySelector('.rst-footer-buttons');
    if (footerButtons && footerButtons.parentNode) {
      footerButtons.parentNode.insertBefore(root, footerButtons);
    }
  } catch (e) {
    // no-op if structure not present
  }

  const initial = root.querySelector('#ttfb-initial');
  const form = root.querySelector('#ttfb-form');
  const prompt = root.querySelector('#ttfb-prompt');
  const reasonsWrap = root.querySelector('#ttfb-reasons');
  const text = root.querySelector('#ttfb-text');
  const thanks = root.querySelector('#ttfb-thanks');
  const error = root.querySelector('#ttfb-error');
  const upBtn = root.querySelector('#ttfb-up');
  const downBtn = root.querySelector('#ttfb-down');
  const canContact = root.querySelector('#ttfb-can-contact');
  const emailWrap = root.querySelector('#ttfb-email-wrap');
  const emailInput = root.querySelector('#ttfb-email');

  let sentiment = null; // 'up' | 'down'

  function show(el) { el.classList.remove('ttfb-hidden'); }
  function hide(el) { el.classList.add('ttfb-hidden'); }

  function setPromptForSentiment() {
    if (sentiment === 'down') {
      prompt.textContent = 'We\'re sorry to hear that. Can you tell us more?';
      show(reasonsWrap);
    } else {
      prompt.textContent = 'Thanks! Anything to add? (optional)';
      hide(reasonsWrap);
    }
  }

  function validateEmail(email) {
    return /.+@.+\..+/.test(email);
  }

  function submitPayload(payload) {
    try {
      if (window.posthog && typeof window.posthog.capture === 'function') {
        window.posthog.capture('docs_feedback', payload);
      } else {
        console.log('Feedback submitted:', payload);
      }
      return true;
    } catch (e) {
      console.error('Feedback submit error', e);
      return false;
    }
  }

  upBtn.addEventListener('click', function () {
    sentiment = 'up';
    hide(initial);
    setPromptForSentiment();
    show(form);
    text.focus();
  });

  downBtn.addEventListener('click', function () {
    sentiment = 'down';
    hide(initial);
    setPromptForSentiment();
    show(form);
  });

  canContact.addEventListener('change', function () {
    if (canContact.checked) {
      show(emailWrap);
      emailInput.focus();
    } else {
      hide(emailWrap);
    }
  });

  form.addEventListener('submit', function (e) {
    e.preventDefault();
    const page = window.location.pathname;
    const ts = new Date().toISOString();
    const feedbackText = text.value.trim();
    const canContactVal = !!canContact.checked;
    const emailVal = emailInput.value.trim();
    const reasonEl = root.querySelector('input[name="down_reason"]:checked');
    const reason = reasonEl ? reasonEl.value : null;

    if (canContactVal && emailVal && !validateEmail(emailVal)) {
      emailInput.setCustomValidity('Please enter a valid email.');
      emailInput.reportValidity();
      return;
    } else {
      emailInput.setCustomValidity('');
    }

    const payload = {
      sentiment,
      reason,
      text: feedbackText,
      can_contact: canContactVal,
      email: canContactVal ? emailVal || null : null,
      page,
      timestamp: ts
    };

    const ok = submitPayload(payload);
    hide(form);
    if (ok) {
      show(thanks);
      setTimeout(() => { root.style.display = 'none'; }, 3000);
    } else {
      show(error);
    }
  });
});
</script>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>