<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .custom-radio input[type="radio"] { display: none; }
        .custom-radio label { display: block; padding: 0.75rem 1rem; border: 1px solid #EDEFF9; border-radius: 0.375rem; cursor: pointer; transition: all 0.2s ease-in-out; color: #202020; }
        .custom-radio input[type="radio"]:checked + label { border-color: #7C68FA; background-color: #F8F7FF; box-shadow: 0 0 0 1px #7C68FA; }
        .custom-radio label:hover { border-color: #9CA3AF; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tens-purple': '#7C68FA',
                        'tens-purple-dark': '#6552D9',
                        'tens-black': '#202020',
                        'tens-slate-light': '#EDEFF9',
                    }
                }
            }
        }
    </script>
    </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="{{ "/" | absolute_url }}">{{ site.title | default: site.github.repository_name }}</a></h1>
        {% if site.logo %}
          <img src="{{site.logo | relative_url}}" alt="Logo" />
        {% endif %}
        <p>{{ site.description | default: site.github.project_tagline }}</p>
        {% if site.github.is_project_page %}
        <p class="view"><a href="{{ site.github.repository_url }}">View the Project on GitHub <small>{{ site.github.repository_nwo }}</small></a></p>
        {% endif %}
        {% if site.github.is_user_page %}
        <p class="view"><a href="{{ site.github.owner_url }}">View My GitHub Profile</a></p>
        {% endif %}
        {% if site.show_downloads %}
        <ul class="downloads">
          <li><a href="{{ site.github.zip_url }}">Download <strong>ZIP File</strong></a></li>
          <li><a href="{{ site.github.tar_url }}">Download <strong>TAR Ball</strong></a></li>
          <li><a href="{{ site.github.repository_url }}">View On <strong>GitHub</strong></a></li>
        </ul>
        {% endif %}
      </header>
      <section>

      {{ content }}

      {% include feedback_widget.html %}
      </section>
      <footer>
        {% if site.github.is_project_page %}
        <p>This project is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a></p>
        {% endif %}
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>

    <script>
        const GOOGLE_FORM_ACTION_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfm85tC4WbN8WkqnaaE1UV34o6Ejb9L36MrpQuHb9qfx6YBHw/formResponse';
        const VOTE_ENTRY_ID = 'entry.762193005';
        const DOWN_REASON_ENTRY_ID = 'entry.139341122';
        const FEEDBACK_ENTRY_ID = 'entry.1200873102';
        const CAN_CONTACT_ENTRY_ID = 'entry.971510749';
        const CONTACT_EMAIL_ENTRY_ID = 'entry.895668218';
        const PAGE_URL_ENTRY_ID = 'entry.548043556';
        const USER_AGENT_ENTRY_ID = 'entry.857436245';
        const thumbUpBtn = document.getElementById('thumb-up-btn');
        const thumbDownBtn = document.getElementById('thumb-down-btn');
        const feedbackForm = document.getElementById('feedback-form');
        const feedbackPrompt = document.getElementById('feedback-prompt');
        const thumbsDownReasons = document.getElementById('thumbs-down-reasons');
        const submitBtn = document.getElementById('submit-feedback-btn');
        const feedbackText = document.getElementById('feedback-text');
        const canContactCheckbox = document.getElementById('can-contact-checkbox');
        const initialState = document.getElementById('feedback-initial-state');
        const thankYouState = document.getElementById('feedback-thank-you-state');
        const errorState = document.getElementById('feedback-error-state');
        const emailContainer = document.getElementById('email-container');
        const feedbackEmail = document.getElementById('feedback-email');
        let selectedVote = null;
        function handleContactToggle() { emailContainer.classList.toggle('hidden', !canContactCheckbox.checked); }
        function handleVoteClick(event) {
            const button = event.currentTarget;
            selectedVote = button.id === 'thumb-up-btn' ? 'up' : 'down';
            thumbUpBtn.classList.remove('bg-gray-200', 'border-tens-purple');
            thumbDownBtn.classList.remove('bg-gray-200', 'border-tens-purple');
            button.classList.add('bg-gray-200', 'border-tens-purple');
            initialState.classList.add('hidden');
            feedbackForm.classList.remove('hidden');
            if (selectedVote === 'up') {
                feedbackPrompt.textContent = 'Great! Is there anything we could change to make it even more helpful?';
                thumbsDownReasons.classList.add('hidden');
            } else {
                feedbackPrompt.textContent = 'Is there anything we could change to make this article helpful?';
                thumbsDownReasons.classList.remove('hidden');
            }
        }
        async function handleSubmit(event) {
            event.preventDefault();
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            const formData = new FormData();
            formData.append(VOTE_ENTRY_ID, selectedVote);
            if (selectedVote === 'down') {
                const checkedReason = document.querySelector('input[name="down_reason_radio"]:checked');
                if (checkedReason) { formData.append(DOWN_REASON_ENTRY_ID, checkedReason.value); }
            }
            formData.append(FEEDBACK_ENTRY_ID, feedbackText.value.trim());
            formData.append(CAN_CONTACT_ENTRY_ID, canContactCheckbox.checked ? 'Yes' : 'No');
            formData.append(CONTACT_EMAIL_ENTRY_ID, canContactCheckbox.checked ? feedbackEmail.value.trim() : '');
            formData.append(PAGE_URL_ENTRY_ID, window.location.href);
            formData.append(USER_AGENT_ENTRY_ID, navigator.userAgent);
            try {
                await fetch(GOOGLE_FORM_ACTION_URL, { method: 'POST', body: formData, mode: 'no-cors' });
                feedbackForm.classList.add('hidden');
                thankYouState.classList.remove('hidden');
            } catch (error) {
                console.error('Error submitting feedback:', error);
                feedbackForm.classList.add('hidden');
                errorState.classList.remove('hidden');
            }
        }
        thumbUpBtn.addEventListener('click', handleVoteClick);
        thumbDownBtn.addEventListener('click', handleVoteClick);
        feedbackForm.addEventListener('submit', handleSubmit);
        canContactCheckbox.addEventListener('change', handleContactToggle);
    </script>
    </body>
</html>
